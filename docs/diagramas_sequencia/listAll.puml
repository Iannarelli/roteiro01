' @startuml
' title Diagrama de Sequencia referente ao FP01 - Listar tarefas
' actor Usuário
' Boundary Frontend
' Boundary SpringBoot
' Control taskController
' Entity Task
' Participant taskService
' Participant taskRepository
' Participant pagedResourcesAssembler
' Boundary TypedQuery
' Participant Hibernate
' Database TodoList
' activate SpringBoot
' Usuário -> Frontend: Listar todas as tarefas
' activate Usuário
' activate Frontend
' activate TodoList
' Frontend -> SpringBoot: GET api/task/
' group Roteiro01Application [Spring Boot Java Application]
' SpringBoot -> taskController: listAll(request, response, Pageable, PersistentEntityResourceAssembler)
' activate taskController
' taskController -> taskService: listAll(pageable)
' activate taskService
' taskService -> taskRepository: findAll(pageable)
' activate taskRepository
' taskRepository -> TypedQuery: getResultList(TaskDto)
' group JPA Framework[Hibernate]
' Activate TypedQuery
' TypedQuery -> Hibernate: List(TaskDto)
' Activate Hibernate
' Hibernate -> TodoList: SELECT * FROM Tasks
' TodoList --> Hibernate: Table Tasks
' Hibernate --> TypedQuery: Table Tasks
' TypedQuery --> taskRepository: Page<Tasks>
' destroy TypedQuery
' end
' taskRepository --> taskService: Page<Task>
' destroy taskRepository
' taskService --> taskController: Page<Task> events
' destroy taskService
' taskController -> pagedResourcesAssembler: toModel(events, resourceAssembler)
' activate pagedResourcesAssembler
' pagedResourcesAssembler --> taskController: PagedModel<Task> resource
' destroy pagedResourcesAssembler
' taskController --> SpringBoot: ResponseEntity<Task> ResponseEntity.ok(resource)
' destroy taskController
' end
' SpringBoot --> Frontend : ResponseEntity<Task> ResponseEntity.ok(resource)
' Frontend --> Usuário: <list>Task
' @enduml

@startuml
actor Usuário
Boundary Frontend
Boundary SpringBoot
Control TaskController
Entity Task
participant TaskService
participant TaskRepository
participant pagedResourcesAssembler
Boundary TypedQuery
Database ToDoList

activate SpringBoot
Usuário -> Frontend: Listar todas as tarefas
activate Usuário
activate Frontend
activate ToDoList
Frontend -> SpringBoot: GET api/task/
group Roteiro01Application [Spring Boot Java Application]
SpringBoot -> TaskController: listAll(request, response, Pageable, PersistentEntityResourceAssembler)
activate TaskController
TaskController -> TaskController: getUUID(request, response)
TaskController -> TaskService: findAllByDispositivoId(dispositivoId, pageable)
activate TaskService
TaskService -> TaskRepository: findAllByDispositivoId(dispositivoId, pageable)
activate TaskRepository
TaskRepository -> TypedQuery: findAllByDispositivoId(dispositivoId, TaskDto)
group JPA Framework
activate TypedQuery
TypedQuery -> ToDoList: SELECT * FROM Tasks WHERE dispositivoId = dispositivoId
ToDoList --> TypedQuery: Table Tasks
TypedQuery --> TaskRepository: Page<Tasks>
destroy TypedQuery
end
TaskRepository --> TaskService: Page<Task>
destroy TaskRepository
TaskService --> TaskController: Page<Task> events
destroy TaskService
TaskController -> pagedResourcesAssembler: toModel(events, resourceAssembler)
activate pagedResourcesAssembler
pagedResourcesAssembler --> TaskController: PagedModel<Task> resource
destroy pagedResourcesAssembler
TaskController --> SpringBoot: ResponseEntity.ok(List<Task>)
destroy TaskController
end
SpringBoot --> Frontend: ResponseEntity.ok(List<Task>)
Frontend --> Usuário: List<Task>
@enduml
